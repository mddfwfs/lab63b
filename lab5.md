# การทดลองที่ 5 เรื่อง การเขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

## วัตถุประสงค์
1.เพื่อศึกษาการขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

2.เพื่อศึกษาเกี่ยวกับไมโครคอนโทรเลอร์ที่เขียนโปรแกรมแล้วนำไปประยุกต์ใช้
### อุปกรณ์ที่ใช้
1.คอมพิวเตอร์

2.microcontroller ESP01

3.อุปกรณ์ต่อ USB-Serial

4.ตัวโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

#### ศึกษาข้อมูลเบื้องต้น

1.05 run wifi https://youtu.be/VX-QNQcO-b4

2.code 05_run_wifi https://github.com/choompol-boonmee/lab63b/blob/master/examples/05_Wifi-Web-Server/src/main.cpp

##### วิธีทำการทดลอง

1.เปิด cmd ใช้คำสั่งซึ่งจากตัวอย่างอยู่ในโฟล์เดอร์ pattani ใช้คำสั่ง cd

2.ใช้คำสั่ง 05_run_wifi

5.ใช้คำสั่ง vi src/main.cpp จะขึ้นโค้ดดังนี้


เนืองจากโปรแกรมเชื่อมต่อกับไวไฟดังนั้นต้องใส่ชื่อ wifi และ password ก่อน ตัวโปรแกรมแบ่งออกเป็น 2 ส่วนได้แก่

   1.Setup เป็นการ connect กับไวไฟที่เราใส่ชื่อไว้ตอนแรก และ Setup webserver โดยให้แสดงผลเป็น Hello cntโดย cnt จะบวก 1 ขึ้นเรื่อยๆ

   2.Loop

6.อัพโหลดโปรแกรมเข้าไมโครคอนโทรเลอร์โดยการใช้คำสั่ง pio run-t upload

7.ต่อไมโครคอนโทรเลอร์เข้ากับคอมพิวเตอร์ด้วยการต่อ USBไปยังSerial

8.กดปุ่มลัพโหลดและกดปุ่มรีเซตที่ตัวไมโครคอนโทรเลอร์เพื่อให้ตัวโปรแกรมอัพโหลดเข้าไปในตัวไมโครคอนโทรเลอร์

9.pio device monitor เพื่อดูผลลัพธ์ 

10.ต่อมาจะขึ้น ip address ให้ copy ip address ไปบราวเซอร์ในการทดสอบแล้วบันทึกผล

##### การบันทึกผลการทดลอง
จะเห็นว่าจากค่ำสั่ง pic device monitor เพื่อดูแลลัพธ์ของการรันโปรแกรมในไมโครคอนโทรเลอร์ได้ขึ้น ip address และเมื่อ copy ip address ไปที่บราวเซอร์ก็จะป็น Helo 1 โดย cnt ก็จะเปลี่ยนตัวแปรไปเรื่อย ๆ 

##### อภิปรายผลการทดลอง

จากการทดลองเขียนโปรแกรมสามารถสรุปได้ว่าเราสามารถให้ไมโครคอนโทรเลอร์เชื่อมต่อไวไฟและเว็บเซิร์ฟเวอร์สามารถทำงานได้เหมือนเว็บเสิร์ฟเวอร์ทั่วไป

##### คำถามหลังการทดลอง
