# การทดลองที่ 4 การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล
## วัตถุประสงค์
1.เพื่อทราบถึงการเขียนโปรแกรมอินพุทสัญญาณดิจิทัล

2.เพื่อนำ microcontroller ที่เขียนโปรแกรมแล้วไปประยุกต์ใช้

### อุปกรณ์ที่ใช้
1.ไมโครคอนโทรเลอร์ (ESP-01)

2.อแดปเตอร์ที่ต่อสายพอร์ท 0 (สีขาว) กับ พอร์ท 2 (สีเหลือง)

3.อุปกรณ์ต่อ USB

4.หลอดไฟ LED 

5.CPU

6.ตัวโปรแกรมเอาท์พุทสัญญาณ

7.ตัวเซนเซอร์แสง

#### ศึกษาข้อมูลเบื้องต้น
1.04 run example 4 https://youtu.be/nFqoZT26U5k

2.code ของโปรแกรม 04_Inpt-Port : https://github.com/choompol-boonmee/lab63b/blob/master/examples/04_Input-Port/src/main.cpp

##### วิธีการทำทดลอง
1.เอาอแดปเตอร์ต่อกับตัว USB to seria (ตัวอแดปเตอร์ที่ใช้ในการทดลองนี้มีการต่อกับ LED)

2.นำตัวmicrocontrollerต่อกับพอร์ท

3.เข้าcommand prompt

4.เข้าตัวอย่างโปรแกรมจากโดยใช้พิมพ์คำสั่ง cd pattani ในหน้า command prompt

5.เลือกตัวอย่างโปรแกรมคำสั่ง cd 04_Input-Port

6.พิมพ์คำสั่ง vi src/main.cpp เมื่อกด Enter จะขึ้นโค้ดดังนี้

โดยโค้ดของโปรแกรมนี้ได้เซตที่พอร์ท 0 คือ input พอร์ท 2 คือ output และ อ่านจะอ่านข้อมูลจากพอร์ท 0 โดยให้เป็นข้อมูลดิจิทัล(มีค่า 0 1) และแสดงผลว่าอ่านได้เท่าไหร่โดยถ้าเป็น 1 จะเป็นค่า low ที่พอร์ท 2 
และถ้าเป็น 0 จะเป็นค่า high ที่พอร์ท 2 

7.กดปุ่มอัพโหลดและกดปุ่มรีเซตที่ตัวไมโครคอนโทรลเลอร์เพื่อให้ตัวโปรแกรมอัพโหลดเข้าไปในตัวไมโครคอนโทรลเลอร์

8.pio device monitor เพื่อดูผลลัพธ์

9.ดูที่สายไฟเส้นที่ขาว (พอร์ท 0) โดยจิ้มที่เส้นสีดำ (0V)

10.นำตัวไมโครคอนโทรลเลอร์ที่เขียนโปรแกรมไว้แล้วมาต่อกับตัวรีเลย์

11.กดปุ่มสีดำ (เป็น0 ไฟติด) และปล่อยปุ่มสีดำ

12.ต่อตัวเซนเซอร์กับ CPU ตามภาพ

13.นำinput(เส้นสีขาว)ต่อกับสัญญาณจากcensor

14.ลองเอานิ้วไปเปิดหน้า censor กับ ไม่เอานิ้วปิดcensorและสังเกตหลอด LED

##### การบันทึกผลการทดลอง
1.เขียนโปรแกรมไมโครคอนโทรลเลอร์ด้วยโปรแกรม 04_Input-Port

  จะเห็นว่าจากคำสั่ง pio device monitor ได้ขึ้นชื่อว่า read 1 ซึ่งหมายความว่า input คือ 1 ทำให้เป็น low ที่พอร์ท 2 จะทำให้ไฟดับนั่นเอง 
  
  - เมื่อจิ้มเส้นอินพุทไปที่สีดำซึ่งจะได้ค่า input คือ 0 ทำให้เป็น high ไฟติด 

  - เมื่อจิ้มเส้นอินพุทไปที่สีแดงซึ่งจะได้ค่า input คือ 1 ทำให้เป็น low ไฟดับ

 กดปุ่มสีดำ input คือ 0 ทำให้เป็น high (ไฟติด)
 
 ปล่อยปุ่ม input คือ 1 ทำให้เป็น low (ไฟดับ)
 
 2.การนำตัวไมโครคอนโทรลเลอร์ที่ได้ลงโปรแกรมแล้วมาประยุกต์ใช้ต่อกับตัวเซนเซอร์แสง จะเห็นว่าเมื่อเอานิ้วบัง ไฟดับ และไม่เอานิ้วบังแสง ไฟติด

##### อภิปรายผลการทดลอง
จากการทดลองเขียนโปรแกรมสามารถสรุปจากการโค้ดที่เขียนโปรแกรมได้ว่า สัญญาณอินพุทจากพอร์ท 0 คือตัวควบคุมให้ไฟเปิดหรือปิด ถ้า 1 ไฟดับ ถ้า 0 ไฟติดโดยดูไฟที่พอร์ท 2 

และในส่วนของการมาประยุกต์ใช้ต่อกับตัวเซนเซอร์แสง โดยเมื่อบังแสง ทำให้แรงต้านสูงทำให้ค่า input 1 ไฟดับ และเมื่อสว่างทำให้แรงต้านทานน้อย input เป็น 0 ไฟติด

##### คำถามหลังการทดลอง

